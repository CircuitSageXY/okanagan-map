<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Route‑Planner Time Frames</title>

<link rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap">

<style>
:root{
  --clr-early:        #8BC34A;
  --clr-late:         #4CAF50;
  --clr-lunch:        #FFEB3B;
  --clr-afternoon:    #03A9F4;
  --clr-supper:       #FF9800;
  --clr-evening:      #BA68C8;
  --clr-late-evening: #F44336;

  --axis-w:4px;                 /* width of the black timeline line   */
  --dock-w:90px;                /* overall width of the coloured bar  */
  --timeline-h:500px;           /* height of the drawer when open     */
}

/* reset & layout */
*{box-sizing:border-box;margin:0;padding:0;}
html,body{margin:0;font-family:Roboto,Arial,sans-serif;background:#fff;overflow:hidden;}

#controls{
  display:flex;                 /* vertical stack */
  flex-direction:column;
  gap:6px;
  padding:8px 8px 6px;
}
.shiftToggle{
  padding:6px 14px;border:none;border-radius:4px;
  background:#e0e0e0;cursor:pointer;font-size:14px;transition:background .15s;
}
.shiftToggle:hover{background:#f1f1f1;}
.shiftToggle.active{background:#90CAF9;font-weight:500;}

.drawer{
  max-height:0;overflow:hidden;transition:max-height .3s ease;padding-left:8px;
}
.drawer.open{padding-top:10px;padding-bottom:10px;max-height:none;}

.timeline{
  position:relative;
  width:var(--dock-w);
  height:var(--timeline-h);
  background:#616161;
  border-radius:2px;
  /* centre children text slightly right of axis */
}

/* black vertical axis */
.timeline::before{
  content:"";
  position:absolute;
  top:0;left:calc(var(--axis-w)/2);
  width:var(--axis-w);height:100%;
  background:#000;
  border-radius:2px;
}

/* coloured segments */
.segment{
  position:absolute;left:0;width:100%;
}
.segment span{
  position:absolute;left:calc(var(--axis-w) + 6px);
  top:50%;transform:translateY(-50%);
  font-size:11px;color:#000;white-space:nowrap;pointer-events:none;
}

/* time labels 07:00 & 22:30 */
.label{
  position:absolute;left:calc(var(--axis-w) + 6px);
  font-size:10px;color:#000;white-space:nowrap;
}
.label.top{top:-10px;}   /* 07:00 */
.label.bot{bottom:-10px;}/* 22:30 */

/* live “now” marker */
.nowMarker{
  position:absolute;left:calc(var(--axis-w)/2);
  width:12px;height:12px;
  border:2px solid #000;background:#fff;border-radius:50%;
  transform:translateX(-50%) translateY(-50%);
  box-shadow:0 0 4px rgba(0,0,0,.4);
}
</style>
</head>
<body>

<!-- vertical buttons -->
<div id="controls">
  <button class="shiftToggle" data-shift="day">Day&nbsp;Shift</button>
  <button class="shiftToggle" data-shift="night">Night&nbsp;Shift</button>
</div>

<!-- drawers -->
<div id="day"   class="drawer"></div>
<div id="night" class="drawer"></div>

<script>
/* helpers */
const mins=(h,m)=>h*60+m;
const parseHM=t=>{const [h,m]=t.split(':').map(Number);return mins(h,m);};

/* definitions */
const FRAMES=[
  {name:'AM Early',     start:'07:00', end:'09:00',  color:'var(--clr-early)'},
  {name:'AM Late',      start:'09:00', end:'11:00',  color:'var(--clr-late)'},
  {name:'Lunch',        start:'11:00', end:'13:00',  color:'var(--clr-lunch)'},
  {name:'Afternoon',    start:'13:00', end:'16:00',  color:'var(--clr-afternoon)'},
  {name:'Supper',       start:'16:00', end:'18:30',  color:'var(--clr-supper)'},
  {name:'Evening',      start:'18:30', end:'21:00',  color:'var(--clr-evening)'},
  {name:'Late Evening', start:'21:00', end:'22:30',  color:'var(--clr-late-evening)'}
];
const SHIFTS={
  day:  {start:'07:00', end:'15:30'},
  night:{start:'13:30', end:'22:00'}
};

/* timeline builder */
function buildTimeline(drawer,key){
  const {start,end}=SHIFTS[key];
  const s=parseHM(start), e=parseHM(end), span=e-s;

  const line=document.createElement('div');
  line.className='timeline';
  drawer.appendChild(line);

  /* top/bottom labels */
  const lblTop=document.createElement('div');
  lblTop.className='label top';
  lblTop.textContent=start;
  line.appendChild(lblTop);

  const lblBot=document.createElement('div');
  lblBot.className='label bot';
  lblBot.textContent=end;
  line.appendChild(lblBot);

  FRAMES.forEach(fr=>{
    const segStart=Math.max(parseHM(fr.start),s);
    const segEnd  =Math.min(parseHM(fr.end)  ,e);
    if(segEnd<=segStart) return;

    const seg=document.createElement('div');
    seg.className='segment';
    seg.style.top   =((segStart-s)/span)*100+'%';
    seg.style.height=((segEnd-segStart)/span)*100+'%';
    seg.style.background=fr.color;

    const txt=document.createElement('span');
    txt.textContent=fr.name;
    seg.appendChild(txt);
    line.appendChild(seg);
  });

  const mark=document.createElement('div');
  mark.className='nowMarker';
  line.appendChild(mark);

  const tick=()=>{
    const m=new Date().getHours()*60+new Date().getMinutes();
    const pct=((m-s)/span)*100;
    mark.style.top=pct+'%';
    mark.style.display=(m<s||m>e)?'none':'block';
  };
  tick();setInterval(tick,60_000);
}

/* init */
function init(){
  buildTimeline(document.getElementById('day'),'day');
  buildTimeline(document.getElementById('night'),'night');

  document.querySelectorAll('.shiftToggle').forEach(btn=>{
    btn.addEventListener('click',()=>{
      const drawer=document.getElementById(btn.dataset.shift);
      const open=drawer.classList.toggle('open');
      btn.classList.toggle('active',open);
    });
  });

  /* open day shift by default */
  document.querySelector('.shiftToggle[data-shift="day"]').click();
}
document.addEventListener('DOMContentLoaded',init);
</script>
</body>
</html>
